<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Rock paper scissors game</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body style="background-color: antiquewhite">
    <!--Instructions-->

    <div class="firstText">A game of rock paper scissors</div>

    <div class="secondText">-By Helmer</div>

    <button onclick="game()">Press this to play</button>

    <script>
      // Function that randomly returns either 'Rock', 'Paper' or 'Scissors'
      function getComputerChoice() {
        const choices = ["rock", "paper", "scissors"];

        // Get random number 0 - 1 , multiply by array length (3),
        // round off to the nearest number by going down.
        return choices[Math.floor(Math.random() * choices.length)];
      }

      // returns status of a round
      function playRound(playerSelection, computerSelection) {
        playerSelection = playerSelection.toLowerCase();

        let choiceMade = playerSelection + " " + computerSelection;

        // checks if the player didnt make any choice or spelled it wrong
        if (
          playerSelection !== "rock" &&
          playerSelection !== "scissors" &&
          playerSelection !== "paper"
        ) {
          return null;
        } else if (playerSelection === computerSelection) {
          return "tie";
        }

        // if choiceMade would result in a win for the player, return 'win'
        else if (
          choiceMade == "rock scissors" ||
          choiceMade == "scissors paper" ||
          choiceMade == "paper rock"
        ) {
          return "win";
        } else {
          return "lose";
        }
      }
      // funtion that 'plays' the game and loops
      // until either the player or computer have won.
      // Can probably be made shorter.
      function game() {
        // create variables for the scores and check if any of them is 5 yet.
        for (
          let playerScore = 0, computerScore = 0;
          computerScore < 5 && playerScore < 5;

        ) {
          let computerChoice = getComputerChoice();
          let input = prompt("Rock, Paper, Scissors?");
          let result = playRound(input, computerChoice);

          if (playerScore == 4 && result == "win") {
            playerScore++;
            alert(` Congratulation, you have won! 
                The final score came out to ${playerScore} points to you 
                and ${computerScore} to the computer.`);
          } else if (computerScore == 4 && result == "lose") {
            computerScore++;
            alert(` You lost! The computer won this time but feel free to play 
                again. The final score came out to ${playerScore} points to you 
                and ${computerScore} to the computer.`);
          } else if (result === "win") {
            playerScore++;
            alert(` You win! ${input} beats ${computerChoice}. Current score 
                is ${playerScore} points to you and ${computerScore} points to 
                the computer. `);
          } else if (result === "lose") {
            computerScore++;
            alert(` You lose! ${computerChoice} beats ${input}. Current score 
                is ${playerScore} points to you and ${computerScore} points to 
                the computer.`);
          } else if (result == "tie") {
            alert(
              ` Its a tie! Current score is ${playerScore} points to you and 
                ${computerScore} points to the computer.`
            );
          } else {
            alert("You didnt enter a valid choice, please try again.");
          }
        }
      }
    </script>
  </body>
</html>
